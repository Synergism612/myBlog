<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.synergism.blog.core.tag.mapper.TagMapper">

    <select id="getAllTagInformationList" resultType="com.synergism.blog.core.tag.entity.TagInformation">
        select t.id,
               t.name,
               t.annotation,
               t.creation_time,
               t.modify_time,
               count(atg.article_id) as article_count,
               u.username,
               u.nickname
        from article_tag atg
                 join(tag t ,user_tag ut ,`user` u )
                     on
                             atg.tag_id = t.id and
                             ut.tag_id = t.id and
                             u.id = ut.user_id
        group by t.id,
                 t.name,
                 t.annotation,
                 t.creation_time,
                 t.modify_time,
                 u.username,
                 u.nickname

    </select>
    <select id="getListByArticleID" resultType="com.synergism.blog.core.tag.entity.Tag">
        select
            t.id ,
            t.name ,
            t.annotation ,
            t.creation_time ,
            t.modify_time
        from
            article_tag atg
                join
            tag t
            on atg .tag_id = t.id
        where
            atg.article_id  = #{articleID}
    </select>
</mapper>
